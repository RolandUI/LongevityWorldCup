<!DOCTYPE html>
<html lang="en">
<head>
    <title>Media Kit - Longevity World Cup 2025</title>
    <!--HEAD-->
    <style>
        /* Hide the join-game button in the header */
        .join-game {
            display: none;
        }
    </style>
</head>
<body>
    <!--HEADER-->
    <main>
        <section style="max-width:900px;margin:2rem auto;padding:1rem 1.25rem;">
            <h1>Media Kit</h1>
            <p>Press-ready assets for Longevity World Cup 2025.</p>

            <p style="margin:1rem 0;">
                <a href="https://cdn.jsdelivr.net/gh/nopara73/LongevityWorldCup@master/LongevityWorldCup.Documentation/MediaKit.zip"
                   target="_blank" rel="noopener noreferrer"
                   style="display:inline-block;padding:0.75rem 1.25rem;border-radius:6px;background:#0a7c0a;color:#fff;text-decoration:none;">
                    Download Full Media Kit (ZIP)
                </a>
            </p>

            <!-- Live file list extracted from ZIP (auto-load) -->
            <div id="zipPreview" style="margin-top:1.5rem;">
                <div id="loading" style="margin-top:0.75rem;">Loading…</div>
                <ul id="fileList" style="list-style:none;padding:0;margin-top:0.75rem;"></ul>
                <div id="fallback" style="display:none;margin-top:0.75rem;">
                    Failed to preview. Use the ZIP link above.
                </div>
            </div>

            <p style="margin-top:1.5rem;">
                Press contact:
                <a href="mailto:longevityworldcup@gmail.com">longevityworldcup@gmail.com</a>
            </p>
        </section>

        <!-- JSZip (client-side unzip) -->
        <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js" crossorigin="anonymous"></script>
        <script>
            const ZIP_PRIMARY = "https://cdn.jsdelivr.net/gh/nopara73/LongevityWorldCup@master/LongevityWorldCup.Documentation/MediaKit.zip";
            const ZIP_FALLBACK = "https://raw.githubusercontent.com/nopara73/LongevityWorldCup/master/LongevityWorldCup.Documentation/MediaKit.zip";

            const loadingEl = document.getElementById('loading');
            const listEl = document.getElementById('fileList');
            const fallbackEl = document.getElementById('fallback');

            async function fetchZip(url) {
                const res = await fetch(url, { cache: 'no-store' });
                if (!res.ok) throw new Error("HTTP " + res.status);
                return await res.arrayBuffer();
            }

            async function loadList() {
                try {
                    let buf;
                    try {
                        buf = await fetchZip(ZIP_PRIMARY);
                    } catch (_) {
                        buf = await fetchZip(ZIP_FALLBACK);
                    }

                    const zip = await JSZip.loadAsync(buf);
                    const files = [];
                    zip.forEach((path, file) => { if (!file.dir) files.push(path); });
                    files.sort();

                    for (const path of files) {
                        const li = document.createElement('li');
                        li.style.margin = '0.35rem 0';

                        const name = document.createElement('span');
                        name.textContent = path;
                        name.style.marginRight = '0.5rem';

                        const btn = document.createElement('button');
                        btn.textContent = 'Download';
                        btn.style.padding = '0.3rem 0.6rem';
                        btn.style.marginLeft = '0.25rem';
                        btn.style.border = '1px solid #ccc';
                        btn.style.borderRadius = '4px';
                        btn.style.cursor = 'pointer';
                        btn.addEventListener('click', async () => {
                            const file = zip.file(path);
                            const blob = await file.async('blob');
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = path.split('/').pop();
                            document.body.appendChild(a);
                            a.click();
                            a.remove();
                            URL.revokeObjectURL(url);
                        });

                        li.appendChild(name);
                        li.appendChild(btn);
                        listEl.appendChild(li);
                    }
                } catch (e) {
                    console.error(e);
                    fallbackEl.style.display = 'block';
                } finally {
                    loadingEl.style.display = 'none';
                }
            }

            document.addEventListener('DOMContentLoaded', loadList);
        </script>
    </main>

    <!--FOOTER-->
</body>
</html>